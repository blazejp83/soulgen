---
phase: 02-wizard-ui
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/wizard/steps/temperament-step.tsx
  - src/components/wizard/steps/communication-step.tsx
  - src/components/wizard/steps/work-style-step.tsx
  - src/components/wizard/steps/user-relationship-step.tsx
  - src/lib/temperament-presets.ts
  - src/components/wizard/wizard-shell.tsx
autonomous: true
---

<objective>
Build the four middle wizard steps: Temperament (with presets), Communication Style, Work Style, and User Relationship.

Purpose: These steps are the core configuration UI — sliders, dropdowns, and option selectors that accumulate the DNA object. They represent the bulk of wizard interaction.
Output: Four fully functional wizard steps wired to Zustand store, with temperament presets and Simple/Advanced mode awareness.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-wizard-ui/02-01-SUMMARY.md

@src/types/index.ts
@src/stores/wizard-store.ts
@src/stores/settings-store.ts
@src/components/ui/slider.tsx
@src/components/ui/select.tsx
@src/components/ui/label.tsx
@src/components/ui/card.tsx
@src/components/wizard/wizard-shell.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Temperament step with bipolar sliders and presets</name>
  <files>src/components/wizard/steps/temperament-step.tsx, src/lib/temperament-presets.ts</files>
  <action>
**Temperament presets (src/lib/temperament-presets.ts):**
Export TEMPERAMENT_PRESETS array with objects: {id: string, name: string, description: string, values: Temperament}. Presets:
- Melancholic: low valence (25), low energy (30), moderate warmth (55), low dominance (30), low stability (35), moderate autonomy (45)
- Joyful: high valence (85), high energy (80), high warmth (80), moderate dominance (55), high stability (75), moderate autonomy (60)
- Angry: low valence (30), high energy (85), low warmth (25), high dominance (90), low stability (20), high autonomy (75)
- Haughty: moderate valence (45), moderate energy (50), low warmth (20), high dominance (85), high stability (80), high autonomy (85)

**Temperament step (src/components/wizard/steps/temperament-step.tsx):**
"use client" component. Read dna.temperament from useWizardStore and mode from useSettingsStore. Use useMounted hook.

Layout: Preset buttons at the top as a row of small cards/chips. Clicking a preset calls updateTemperament with preset values (TEMP-03, TEMP-04). Below, render bipolar sliders for each temperament dimension.

Each slider: Label on left showing dimension name, left endpoint label, shadcn Slider component (0-100 range), right endpoint label. Show current value. Use updateTemperament to update individual values on change.

Sliders to show:
- Valence: pessimistic ↔ optimistic
- Energy: calm ↔ energized
- Warmth: cold ↔ empathetic
- Dominance: gentle ↔ assertive
- Stability: reactive ↔ stable
- Autonomy: dependent ↔ independent (TEMP-05)

Simple mode: Show only valence, warmth, dominance (3 key sliders). Advanced mode: Show all 6.

Requirements covered: TEMP-01, TEMP-02, TEMP-03, TEMP-04, TEMP-05.
  </action>
  <verify>npm run build succeeds with no TypeScript errors</verify>
  <done>
- 6 bipolar sliders render with labeled endpoints
- Presets set slider values on click
- Simple mode shows 3 sliders, Advanced shows all 6
- Values persist in Zustand store
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Communication, Work Style, and User Relationship steps</name>
  <files>src/components/wizard/steps/communication-step.tsx, src/components/wizard/steps/work-style-step.tsx, src/components/wizard/steps/user-relationship-step.tsx, src/components/wizard/wizard-shell.tsx</files>
  <action>
**Communication step (src/components/wizard/steps/communication-step.tsx):**
"use client" component. Read dna.communication from useWizardStore, mode from useSettingsStore. Use useMounted hook.

Controls:
- Formality: Slider 0-100 (casual ↔ formal) — COMM-01
- Humor: Slider 0-5 with step=1, show numeric value — COMM-02
- Directness: Slider 0-100 (diplomatic ↔ blunt) — COMM-03
- Response Length: 3-option radio/select (concise, balanced, thorough) — COMM-04
- Structure Preference: 3-option radio/select (prose, mixed, structured) — COMM-05
- Jargon Level: Slider 0-100 (plain ↔ technical) — COMM-06

Simple mode: formality, directness, response length. Advanced: all 6.
Use updateCommunication for all changes.

**Work Style step (src/components/wizard/steps/work-style-step.tsx):**
"use client" component. Read dna.workStyle from useWizardStore, mode from useSettingsStore. Use useMounted hook.

Controls:
- Default Depth: Slider 0-100 (overview ↔ deep dive) — WORK-01
- Explanation Style: 4-option select (examples, analogies, first-principles, mixed) — WORK-02
- Tool Usage: 3-option select (minimal, moderate, heavy) — WORK-03
- Uncertainty Tolerance: 3-option select (cautious, balanced, bold) — WORK-04

Simple mode: depth + explanation style. Advanced: all 4.
Use updateWorkStyle for all changes.

**User Relationship step (src/components/wizard/steps/user-relationship-step.tsx):**
"use client" component. Read dna.userRelationship from useWizardStore, mode from useSettingsStore. Use useMounted hook.

Controls:
- Address Form: 3-option select (formal, casual, friendly) — USER-01
- Feedback Style: 3-option select (gentle, balanced, direct) — USER-02
- Proactivity: Slider 0-100 (reactive ↔ proactive) — USER-03
- Language: text input or select with common languages (en, pl, de, fr, es, ja, etc.) — USER-04

Simple mode: address form + language. Advanced: all 4.
Use updateUserRelationship for all changes.

**Update wizard-shell.tsx:**
Replace placeholder divs for temperament, communication, work-style, and user-relationship steps with the actual step components. Import TemperamentStep, CommunicationStep, WorkStyleStep, UserRelationshipStep and render them in the appropriate switch cases.

For select/radio option groups, use shadcn Select component or build simple button groups using the existing Button component with variant toggling (outline for unselected, default for selected). Keep it consistent across all steps.
  </action>
  <verify>npm run build succeeds with no TypeScript errors</verify>
  <done>
- Communication step renders with 6 controls (3 in simple mode)
- Work Style step renders with 4 controls (2 in simple mode)
- User Relationship step renders with 4 controls (2 in simple mode)
- All steps read from and write to Zustand store
- Wizard shell routes to all 4 new steps correctly
- COMM-01 through COMM-06, WORK-01 through WORK-04, USER-01 through USER-04 addressed
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] All 4 step components render correctly in wizard
- [ ] Sliders update store values
- [ ] Select/radio options update store values
- [ ] Simple/Advanced mode shows/hides controls
- [ ] Temperament presets work
- [ ] Navigation between steps preserves values
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- All 4 middle wizard steps functional with Simple/Advanced awareness
- TEMP-01 through TEMP-05, COMM-01 through COMM-06, WORK-01 through WORK-04, USER-01 through USER-04 addressed
  </success_criteria>

<output>
After completion, create `.planning/phases/02-wizard-ui/02-02-SUMMARY.md`
</output>
