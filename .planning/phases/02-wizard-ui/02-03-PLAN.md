---
phase: 02-wizard-ui
plan: 03
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/wizard/steps/domain-step.tsx
  - src/components/wizard/steps/summary-step.tsx
  - src/components/wizard/wizard-shell.tsx
autonomous: true
---

<objective>
Build the domain selection step and the summary/review step — the final two wizard screens before generation.

Purpose: Domain selection lets users tag their agent's specializations. The summary step shows a complete readable configuration review and the raw DNA JSON for power users, serving as the final checkpoint before generation.
Output: Working domain selection with priority marking and a summary/review step showing all configured values.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-wizard-ui/02-01-SUMMARY.md

@src/types/index.ts
@src/stores/wizard-store.ts
@src/stores/settings-store.ts
@src/lib/archetypes.ts
@src/components/wizard/wizard-shell.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Domain selection step with multi-select and priority marking</name>
  <files>src/components/wizard/steps/domain-step.tsx</files>
  <action>
**Domain step (src/components/wizard/steps/domain-step.tsx):**
"use client" component. Read dna.domains and dna.primaryDomains from useWizardStore. Use useMounted hook.

Render 6 domain tags as toggleable cards/chips in a grid: Coding, Research, Automation, Writing, Planning, Media. Each shows a relevant lucide icon + label.

Click to toggle domain selection (uses toggleDomain from store) — DOMN-01. Selected domains get highlighted border/background.

For selected domains, show a small star/priority toggle. Clicking the star calls setPrimaryDomain. Primary domains show a filled star and "Primary" badge. Max 2-3 primary domains (store already enforces max 3) — DOMN-02.

Show a helper text: "Select domains your agent specializes in. Star up to 3 as primary focus areas."

No Simple/Advanced mode difference for this step — all users see the same UI.

Requirements covered: DOMN-01, DOMN-02, DOMN-03 (generation influence is Phase 3's concern, but domain data is captured here).
  </action>
  <verify>npm run build succeeds with no TypeScript errors</verify>
  <done>
- 6 domain cards render in grid
- Clicking toggles selection (visual feedback)
- Selected domains show priority star toggle
- Max 3 primary domains enforced
- Values persist in Zustand store
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Summary/Review step and wire remaining steps into wizard shell</name>
  <files>src/components/wizard/steps/summary-step.tsx, src/components/wizard/wizard-shell.tsx</files>
  <action>
**Summary step (src/components/wizard/steps/summary-step.tsx):**
"use client" component. Read entire dna object from useWizardStore, mode from useSettingsStore. Use useMounted hook.

Layout: Two sections.

**Section 1 — Readable summary:**
Display all configured values in a clean card-based layout. Group by wizard section:
- Archetype: Show selected archetype name (or "Custom" if custom/null). Clickable to navigate back to archetype step.
- Temperament: Show each slider value as a labeled bar or text description (e.g., "Warmth: 75/100 (empathetic)"). For values near extremes (< 25 or > 75), show the endpoint label. For middle values, show "moderate".
- Communication: Show each setting with its current value.
- Work Style: Show each setting.
- User Relationship: Show each setting.
- Domains: Show selected domains with primary markers.

Each section should have a small "Edit" button/link that navigates back to that step (calls setStep).

**Section 2 — Advanced view (only in Advanced mode):**
Show raw DNA JSON in a code block (JSON.stringify(dna, null, 2)) inside a scrollable pre element. This satisfies the "DNA summary view" requirement from PROJECT.md.

**Bottom area:**
Show a "Generate" button (disabled for now — Phase 3 will wire it up). The button should be prominent (primary variant, large). Helper text: "Ready to generate your agent personality files."

Also include a "Reset" button (destructive variant, smaller) that calls resetDNA and navigates to archetype step.

Requirements covered: WIZD-04 (summary/review before generation).

**Update wizard-shell.tsx:**
Replace placeholder divs for "domains" and "summary" steps with DomainStep and SummaryStep components. Import and render them in the appropriate switch cases. At this point, all 7 steps should have real components — no more placeholders.
  </action>
  <verify>npm run build succeeds with no TypeScript errors</verify>
  <done>
- Summary step shows all configured values grouped by section
- Each section has "Edit" link navigating to that step
- Advanced mode shows raw DNA JSON
- Generate button present (disabled)
- Reset button works
- Wizard shell has all 7 real step components — no placeholders
- WIZD-01 through WIZD-04 addressed across plans 01-03
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Domain step renders 6 domain cards
- [ ] Domain selection and priority marking work
- [ ] Summary step shows all configured values
- [ ] Edit links navigate to correct steps
- [ ] Advanced mode shows DNA JSON
- [ ] All 7 wizard steps have real components (no placeholders remain)
- [ ] Full wizard flow works: archetype → temperament → communication → work-style → user-relationship → domains → summary
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Complete wizard flow navigable end-to-end
- Summary displays all DNA values with edit capability
- DOMN-01 through DOMN-03, WIZD-01 through WIZD-04 addressed
  </success_criteria>

<output>
After completion, create `.planning/phases/02-wizard-ui/02-03-SUMMARY.md`
</output>
